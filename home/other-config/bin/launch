#!/usr/bin/env bash

apps=(
    "launch - Zen:uwsm-app -- zen"
    "launch - Helix: uwsm-app -- kitty hx"
    "launch - Spotify:uwsm-app -- spotify --no-zygote"
    "sn - search nixpkgs: uwsm-app -- kitty --detach --hold --app-id floater fish -c sn"
    "no - search options: uwsm-app -- kitty --detach --app-id floater fish -c no"
    "aichat: uwsm-app -- kitty aichat -m llama-cpp:gemma3-4b -r concise -s session --empty-session"
    "ai - kill server:pkill llama-server"
    "ai - Model - Enoch-12b:notify-send -u low 'AI Model' 'Loading Enoch-12b' && pkill llama-server; llama-server -m ~/Code/models/Enoch-CWC-Mistral-Nemo-12B-v2-GGUF-q4_k_m.gguf -a 'Enoch-12b' --ctx-size 8192 --port 8081 --host 127.0.0.1"
    "ai - Model - Gemma3-4b: notify-send -u low 'AI Model' 'Loading Gemma3-4b' && pkill llama-server; llama-server -a 'Gemma3-4b (vision)' -m ~/Code/models/ggml-org_gemma-3-4b-it-GGUF_gemma-3-4b-it-Q4_K_M.gguf --mmproj ~/Code/models/ggml-org_gemma-3-4b-it-GGUF_mmproj-model-f16.gguf --temp 1.0 --top-k 64 --min-p 0.00 --top-p 0.95 --repeat-penalty 1.0 --ctx-size 8192 --port 8081 --host 127.0.0.1"
    "ai - Model - GPT-OSS-20B(reasoning):notify-send -u low 'AI Model' 'Loading GPT-OSS-20B' && pkill llama-server; llama-server -a 'GPT-OSS-20b' -m ~/Code/models/gpt-oss-20b-MXFP4.gguf --jinja --ctx-size 8192 -ub 2048 -b 2048 --n-cpu-moe 21 --temp 1.0 --top-p 1.0 --top-k 0 --min-p 0 --port 8081 --host 127.0.0.1"
    "ai - Model - LFM2-8B-A1B:notify-send -u low 'AI Model' 'Loading LFM2' && pkill llama-server; llama-server -a 'LFM2-8B-A1B' -m ~/Code/models/LFM2-8B-A1B-Q4_K_M.gguf --ctx-size 8192 --temp 0.3 --min-p 0.15 --repeat-penalty 1.05 --port 8081 --host 127.0.0.1"
    "ai - Model - Qwen3-30B-A3B:notify-send -u low 'AI Model' 'Loading Qwen3-30B-A3B' && pkill llama-server; llama-server -a 'Qwen-30b-A3B' -m ~/Code/models/Qwen3-30B-A3B-Instruct-2507-Q4_K_M.gguf --ctx-size 8192 --temp 0.7 --top-p 0.8 --min-p 0 --top-k 20 --presence-penalty 1.05 --port 8081 --host 127.0.0.1"
    "ai - Model - Qwen3-4B-instruct:notify-send -u low 'AI Model' 'Loading Qwen3-4B-Instruct' && pkill llama-server; llama-server -a 'Qwen3-4B-Instruct' -m ~/Code/models/Qwen3-4B-Instruct-2507-IQ4_XS.gguf --ctx-size 8192 --temp 0.7 --top-p 0.8 --top-k 20 --min-p 0 --presence-penalty 1.05 --port 8081 --host 127.0.0.1"
    "config - FZF Launcher: uwsm-app -- kitty --detach  hx ~/.local/bin/launch"
    "config - Fish - aliases/abbrs: uwsm-app -- kitty hx ~/.config/fish/conf.d/aliases-abbrs.fish"
    "config - Fish - config: uwsm-app -- kitty hx ~/.config/fish/config.fish"
    "config - Helix - config: uwsm-app -- kitty hx ~/.config/helix/config.toml"
    "config - Helix - languages: uwsm-app -- kitty hx ~/.config/helix/languages.toml"
    "config - Kitty: uwsm-app -- kitty hx ~/.config/kitty/kitty.conf"
    "config - Mango - binds: uwsm-app -- kitty hx ~/.config/mango/binds.conf"
    "config - Mango - config: uwsm-app -- kitty hx ~/.config/mango/config.conf"
    "config - Mango - layout(scroll): uwsm-app -- kitty hx ~/.config/mango/layouts/scroll.conf"
    "config - Mango - rules: uwsm-app -- kitty hx ~/.config/mango/rules.conf"
    "config - Niri - binds: uwsm-app -- kitty hx ~/.config/niri/binds.kdl"
    "config - Niri - main: uwsm-app -- kitty hx ~/.config/niri/config.kdl"
    "config - Niri - edit open-float.py: uwsm-app -- kitty hx ~/.local/bin/niri-open-float.py"
    "config - Niri - environment: uwsm-app -- kitty hx ~/.config/niri/environment.kdl"
    "config - Niri - input: uwsm-app -- kitty hx ~/.config/niri/input.kdl"
    "config - Niri - layer-rules: uwsm-app -- kitty hx ~/.config/niri/layer-rules.kdl"
    "config - Niri - layout: uwsm-app -- kitty hx ~/.config/niri/layout.kdl"
    "config - Niri - output: uwsm-app -- kitty hx ~/.config/niri/output.kdl"
    "config - Niri - restart open-float.py:pkill python3; niri-open-float"
    "config - Niri - spawns: uwsm-app -- kitty hx ~/.config/niri/spawns.kdl"
    "config - Niri - wiki: uwsm-app -- kitty --app-id floater tv niri-wiki"
    "config - Niri - window-rules: uwsm-app -- kitty hx ~/.config/niri/window-rules.kdl"
    "config - NixOS - environment: uwsm-app -- kitty hx ~/NixOS/modules/environment.nix"
    "config - NixOS - flake: uwsm-app -- kitty hx ~/NixOS/flake.nix"
    "config - NixOS - home: uwsm-app -- kitty hx ~/NixOS/home/home.nix"
    "config - NixOS - programs: uwsm-app -- kitty hx ~/NixOS/modules/programs.nix"
    "config - NixOS - services: uwsm-app -- kitty hx ~/NixOS/modules/services.nix"
    "config - NixOS - users: uwsm-app -- kitty hx ~/NixOS/modules/users.nix"
    "config - Yazi - main: uwsm-app -- kitty hx ~/.config/yazi/yazi.toml"
    "config - Yazi - keymaps: uwsm-app -- kitty hx ~/.config/yazi/keymap.toml"
    "DMS - settings:dms ipc settings toggle"
    "DMS - restart:systemctl --user restart dms"
    "DMS - start:systemctl --user start dms"
    "DMS - stop:systemctl --user stop dms"
    "noctalia - restart:systemctl --user restart noctalia"
    "noctalia - start:systemctl --user start noctalia"
    "noctalia - stop:systemctl --user stop noctalia"
    "Helix - bin: uwsm-app -- kitty hx ~/.local/bin"
    "Helix - .config: uwsm-app -- kitty hx ~/.config"
    "Helix - home: uwsm-app -- kitty hx"
    "Helix - nixos: uwsm-app -- kitty hx ~/NixOS"
    "Launch - atq manager: uwsm-app -- kitty --app-id floater tv atq"
    "Launch - btop: uwsm-app -- kitty btop"
    "Launch - emacs:emacs"
    "Launch - firefox:firefox"
    "Launch - systemctl-tui: uwsm-app -- kitty systemctl-tui"
    "Launch - tag editor (puddletag):puddletag"
    "Mixer - alsa : uwsm-app -- kitty alsamixer"
    "Mixer - pipewire (gui):pwvucontrol"
    "Mixer - pipewire (tui): uwsm-app -- kitty ncpamixer"
    "npr - remove packages: uwsm-app -- kitty -e fish -c npr"
    "npu - helix: uwsm-app -- kitty -e nix profile upgrade helix"
    "npu - jjui: uwsm-app -- kitty -e nix profile upgrade jjui"
    "npu - mango: uwsm-app -- kitty -e nix profile upgrade mangowc"
    "npu - niri: uwsm-app -- kitty -e nix profile upgrade niri"
    "npu - noctalia-shell: uwsm-app -- kitty -e nix profile upgrade noctalia-shell"
    "npu - zen: uwsm-app -- kitty -e nix profile upgrade zen-browser-flake"
    "nixOS - rebuild: uwsm-app -- kitty --hold -e nh os switch ~/NixOS"
    "nixOS - update: uwsm-app -- kitty --hold -e confirm-update-nixos"
    "podman - podman-tui: uwsm-app -- kitty podman-tui"
    # "podman - restart miniflux: uwsm-app -- kitty --hold -e podman compose -f /home/kev/Code/podman/miniflux/compose.yml restart"
    "podman - restart silverbullet: uwsm-app -- kitty -e podman compose -f /home/kev/Code/podman/silverbullet/compose.yml restart"
    # "podman - update all servers: uwsm-app -- kitty update-servers"
    # "podman - update miniflux: uwsm-app -- kitty /home/kev/Code/podman/miniflux/miniflux-update-restart"
    "podman - update silverbullet: uwsm-app -- kitty /home/kev/Code/podman/silverbullet/silverbullet-update-restart"
    "repo - dms: uwsm-app -- kitty  --app-id repo --title=dms -e jjui ~/Code/DankMaterialShell"
    "repo - helix: uwsm-app -- kitty  --app-id repo --title=helix -e jjui ~/Code/helix"
    "repo - jjui: uwsm-app -- kitty  --app-id repo --title=jjui -e jjui ~/Code/jjui"
    "repo - mango: uwsm-app -- kitty  --app-id repo --title=mango -e jjui ~/Code/mangowc"
    "repo - niri: uwsm-app -- kitty  --app-id repo --title=niri -e jjui ~/Code/niri"
    "repo - NixOS Config: uwsm-app -- kitty --detach  jjui ~/NixOS"
    "repo - silverbullet: uwsm-app -- kitty --detach  jjui ~/Documents/silverbullet"
    "shell - bin: uwsm-app -- kitty --detach --hold -d ~/.local/bin"
    "shell - code: uwsm-app -- kitty --detach --hold -d ~/Code"
    "shell - config: uwsm-app -- kitty --detach --hold -d ~/.config"
    "shell - downloads: uwsm-app -- kitty --detach --hold -d ~/Downloads"
    "shell - home: uwsm-app -- kitty --detach --hold"
    "shell - nixos: uwsm-app -- kitty --detach --hold -d ~/NixOS"
    "shell - temp: uwsm-app -- kitty --detach --hold -d ~/Temp"
    "util - check nixpkgs pr merge: uwsm-app -- kitty --detach --app-id floater fish -c checkpr"
    "util - color picker (hex/rgb):niri-pick-color"
    "util - color picker (hex with zoom):hyprpicker -f hex -a"
    "util - ignore/untrack files in repo: uwsm-app -- kitty --detach --app-id floater fish -c ignore-untrack"
    "util - ssh to sam's pc: uwsm-app -- kitty -e ssh sam@10.0.0.4"
    "util - stopwatch: uwsm-app -- kitty --app-id panel-unfocused -o font_size=9 clock-rs stopwatch"
    "util - set timer: uwsm-app -- kitty --detach --app-id panel-focused -o font_size=9 set_timer"
    "util - tv env: uwsm-app -- kitty --app-id floater tv env"
    "util - kill process: uwsm-app -- kitty --app-id floater pik"
    "wifi - enable radio:rfkill unblock 1"
    "wifi - disable radio:rfkill block 1"
    "wifi - connect (wpa_gui):wpa_gui"
    "yazi - bin: uwsm-app -- kitty yazi ~/.local/bin"
    "yazi - code: uwsm-app -- kitty yazi ~/Code"
    "yazi - config: uwsm-app -- kitty yazi ~/.config"
    "yazi - downloads: uwsm-app -- kitty yazi ~/Downloads"
    "yazi - fish: uwsm-app -- kitty yazi ~/.config/fish/"
    "yazi - fish functions: uwsm-app -- kitty yazi ~/.config/fish/functions/personal"
    "yazi - home: uwsm-app -- kitty yazi"
    "yazi - meditation sounds: uwsm-app -- kitty yazi ~/Music/meditational/best"
    "yazi - nixos: uwsm-app -- kitty yazi ~/NixOS"
    "yazi - nixpkgs: uwsm-app -- kitty yazi /etc/nix/inputs/nixpkgs"
    "yazi - nix store: uwsm-app -- kitty yazi /nix/store/"
    "yazi - silverbullet: uwsm-app -- kitty yazi ~/Documents/silverbullet"
    "yazi - temp: uwsm-app -- kitty yazi ~/Temp"
)

choice=$(printf "%s\n" "${apps[@]}" | cut -d: -f1 | fzf -e --cycle --prompt="  ")

if [ -n "$choice" ]; then
    cmd=$(printf "%s\n" "${apps[@]}" | grep "^$choice:" | cut -d: -f2)

    # Executes the app, fully detaching it from the terminal
    setsid sh -c "$cmd >/dev/null 2>&1 &"
fi
