#!/bin/bash

apps=(
  "Launch - Zen:zen"
  "Launch - Spotify:spotify --no-zygote"
  "Aichat:kitty aichat -m llama-cpp:gemma3-4b -r concise -s session --empty-session"
  "AI - kill server:pkill llama-server"
  "AI - Model - Enoch-12b:notify-send -u low 'AI Model' 'Loading Enoch-12b' && pkill llama-server; llama-server -m ~/Code/models/Enoch-CWC-Mistral-Nemo-12B-v2-GGUF-q4_k_m.gguf -a 'Enoch-12b' --ctx-size 8192 --port 8081 --host 127.0.0.1"
  "AI - Model - Gemma3-4b: notify-send -u low 'AI Model' 'Loading Gemma3-4b' && pkill llama-server; llama-server -a 'Gemma3-4b (vision)' -m ~/Code/models/ggml-org_gemma-3-4b-it-GGUF_gemma-3-4b-it-Q4_K_M.gguf --mmproj ~/Code/models/ggml-org_gemma-3-4b-it-GGUF_mmproj-model-f16.gguf --temp 1.0 --top-k 64 --min-p 0.00 --top-p 0.95 --repeat-penalty 1.0 --ctx-size 8192 --port 8081 --host 127.0.0.1"
  "AI - Model - GPT-OSS-20B(reasoning):notify-send -u low 'AI Model' 'Loading GPT-OSS-20B' && pkill llama-server; llama-server -a 'GPT-OSS-20b' -m ~/Code/models/gpt-oss-20b-MXFP4.gguf --jinja --ctx-size 8192 -ub 2048 -b 2048 --n-cpu-moe 21 --temp 1.0 --top-p 1.0 --top-k 0 --min-p 0 --port 8081 --host 127.0.0.1"
  "AI - Model - LFM2-8B-A1B:notify-send -u low 'AI Model' 'Loading LFM2' && pkill llama-server; llama-server -a 'LFM2-8B-A1B' -m ~/Code/models/LFM2-8B-A1B-Q4_K_M.gguf --ctx-size 8192 --temp 0.3 --min-p 0.15 --repeat-penalty 1.05 --port 8081 --host 127.0.0.1"
  "AI - Model - Qwen3-30B-A3B:notify-send -u low 'AI Model' 'Loading Qwen3-30B-A3B' && pkill llama-server; llama-server -a 'Qwen-30b-A3B' -m ~/Code/models/Qwen3-30B-A3B-Instruct-2507-Q4_K_M.gguf --ctx-size 8192 --temp 0.7 --top-p 0.8 --min-p 0 --top-k 20 --presence-penalty 1.05 --port 8081 --host 127.0.0.1"
  "AI - Model - Qwen3-4B-instruct:notify-send -u low 'AI Model' 'Loading Qwen3-4B-Instruct' && pkill llama-server; llama-server -a 'Qwen3-4B-Instruct' -m ~/Code/models/Qwen3-4B-Instruct-2507-IQ4_XS.gguf --ctx-size 8192 --temp 0.7 --top-p 0.8 --top-k 20 --min-p 0 --presence-penalty 1.05 --port 8081 --host 127.0.0.1"
  "Config - Fish - aliases/abbrs:kitty hx ~/NixOS/home/dots/fish/conf.d/aliases-abbrs.fish"
  "Config - Fish - config:kitty hx ~/NixOS/home/dots/fish/config.fish"
  "Config - FZF Launcher:kitty --detach  hx ~/NixOS/home/dots/bin/launch"
  "Config - Helix - config:kitty hx ~/.config/helix/config.toml"
  "Config - Helix - expansions:kitty yazi ~/.config/helix/snippets"
  "Config - Helix - languages:kitty hx ~/.config/helix/languages.toml"
  "Config - Kitty:kitty hx ~/.config/kitty/kitty.conf"
  "Config - Mango - binds:kitty hx ~/.config/mango/binds.conf"
  "Config - Mango - config:kitty hx ~/.config/mango/config.conf"
  "Config - Mango - layout(scroll):kitty hx ~/.config/mango/layouts/scroll.conf"
  "Config - Mango - rules:kitty hx ~/.config/mango/rules.conf"
  "Config - Niri - binds: kitty hx ~/.config/niri/binds.kdl"
  "Config - Niri - main: kitty hx ~/.config/niri/config.kdl"
  "Config - Niri - edit open-float.py: kitty hx ~/NixOS/home/dots/bin/niri-open-float.py"
  "Config - Niri - environment: kitty hx ~/.config/niri/environment.kdl"
  "Config - Niri - input: kitty hx ~/.config/niri/input.kdl"
  "Config - Niri - layer-rules: kitty hx ~/.config/niri/layer-rules.kdl"
  "Config - Niri - layout: kitty hx ~/.config/niri/layout.kdl"
  "Config - Niri - output: kitty hx ~/.config/niri/output.kdl"
  "Config - Niri - restart open-float.py:pkill python3; niri-open-float"
  "Config - Niri - spawns: kitty hx ~/.config/niri/spawns.kdl"
  "Config - Niri - wiki: kitty --app-id floater tv niri-wiki"
  "Config - Niri - window-rules: kitty hx ~/.config/niri/window-rules.kdl"
  "Config - NixOS - environment:kitty hx ~/NixOS/modules/environment.nix"
  "Config - NixOS - flake:kitty hx ~/NixOS/flake.nix"
  "Config - NixOS - home:kitty hx ~/NixOS/home/home.nix"
  "Config - NixOS - programs:kitty hx ~/NixOS/modules/programs.nix"
  "Config - NixOS - services:kitty hx ~/NixOS/modules/services.nix"
  "Config - NixOS - users:kitty hx ~/NixOS/modules/users.nix"
  "Config - Yazi - main:kitty hx ~/.config/yazi/yazi.toml"
  "Config - Yazi - keymaps:kitty hx ~/.config/yazi/keymap.toml"
  "DMS - restart:systemctl --user restart dms"
  "DMS - settings:dms ipc settings toggle"
  "DMS - start:systemctl --user start dms"
  "DMS - stop:systemctl --user stop dms"
  "Launch - atq manager:kitty --app-id floater tv atq"
  "Launch - btop:kitty btop"
  "Launch - firefox:firefox"
  "Launch - helix:kitty hx"
  "Launch - systemctl-tui:kitty systemctl-tui"
  "Launch - tag editor (puddletag):puddletag"
  "Launch - yazi:kitty yazi"
  "Mixer - alsa :kitty alsamixer"
  "Mixer - pipewire (gui):pwvucontrol"
  "Mixer - pipewire (tui):kitty ncpamixer"
  "Network - nmtui:kitty --app-id=nmtui nmtui"
  "NixOS - rebuild:kitty --hold -e nh os switch ~/NixOS"
  "NixOS - update:kitty --hold -e confirm-update-nixos"
  "NixOS - profile update - helix:kitty -e nix profile upgrade helix"
  "NixOS - profile update - jjui:kitty -e nix profile upgrade jjui"
  "NixOS - profile update - mango:kitty -e nix profile upgrade mangowc"
  "NixOS - profile update - zen:kitty -e nix profile upgrade zen-browser-flake"
  "Podman - podman-tui:kitty podman-tui"
  "Podman - restart miniflux:kitty podman compose restart miniflux"
  "Podman - restart silverbullet:kitty podman compose restart silverbullet"
  "Podman - update all servers:kitty update-servers"
  "Podman - update miniflux:kitty /home/kev/Code/podman/miniflux/miniflux-update-restart"
  "Podman - update silverbullet:kitty /home/kev/Code/podman/silverbullet/silverbullet-update-restart"
  "Repo - dms:kitty  --app-id repo --title=dms -e jjui ~/.config/quickshell/DankMaterialShell"
  "Repo - helix:kitty  --app-id repo --title=helix -e jjui ~/Code/helix"
  "Repo - jjui:kitty  --app-id repo --title=jjui -e jjui ~/Code/jjui"
  "Repo - mango:kitty  --app-id repo --title=mango -e jjui ~/Code/mangowc"
  "Repo - niri:kitty  --app-id repo --title=niri -e jjui ~/Code/niri"
  "Repo - NixOS:kitty --detach  jjui ~/NixOS"
  "Repo - silverbullet:kitty --detach  jjui ~/Documents/silverbullet"
  "Update Nix Profile - helix:kitty -e nix profile upgrade helix"
  "Update Nix Profile - jjui:kitty -e nix profile upgrade jjui"
  "Update Nix Profile - mango:kitty -e nix profile upgrade mangowc"
  "Update Nix Profile - zen:kitty -e nix profile upgrade zen-browser-flake"
  "Util - color picker (hex/rgb):niri-pick-color"
  "Util - color picker (hex with zoom):hyprpicker -f hex -a"
  "Util - stopwatch:kitty --app-id panel-unfocused clock-rs stopwatch"
  "Util - set timer:kitty --detach --app-id panel-focused -o font_size=9 set_timer"
  "Util - tv env:kitty --app-id floater tv env"
  "Util - kill process:kitty --app-id floater pik"
  "Wifi - enable radio:rfkill unblock 1"
  "Wifi - disable radio:rfkill block 1"
  "Wifi - connect (wpa_gui):wpa_gui"
  "Yazi - bin:kitty yazi ~/NixOS/home/dots/bin"
  "Yazi - code:kitty yazi ~/Code"
  "Yazi - config:kitty yazi ~/.config"
  "Yazi - downloads:kitty yazi ~/Downloads"
  "Yazi - fish:kitty yazi ~/NixOS/home/dots/fish/"
  "Yazi - local/bin:kitty yazi ~/.local/bin"
  "Yazi - meditation sounds:kitty yazi ~/Music/meditational/best"
  "Yazi - nixos:kitty yazi ~/NixOS"
  "Yazi - nixpkgs:kitty yazi /etc/nix/inputs/nixpkgs"
  "Yazi - nix store:kitty yazi /nix/store/"
  "Yazi - silverbullet:kitty yazi ~/Documents/silverbullet"
  )

choice=$(printf "%s\n" "${apps[@]}" | cut -d: -f1 | fzf --cycle --prompt="  ")

if [ -n "$choice" ]; then
    cmd=$(printf "%s\n" "${apps[@]}" | grep "^$choice:" | cut -d: -f2)

    # Executes the app, fully detaching it from the terminal
    setsid sh -c "$cmd >/dev/null 2>&1 &"
fi
