#!/usr/bin/env bash

MESSAGE=$1
ICON_PATH="/run/current-system/sw/share/icons/Adwaita/symbolic/emotes"

result=$(notify-send \
  --action=add5=+5m \
  --action=add15=+15m \
  --action=add30=+30m \
  --action=add1hr=+1hr \
  -i "$ICON_PATH/face-smile-symbolic.svg" \
  --urgency=critical \
  "$MESSAGE")

case "$result" in
   add5)
     echo "notify-snooze.sh '$MESSAGE'" | at "now + 5 min"
     exit ;;
   add15)
     echo "notify-snooze.sh '$MESSAGE'" | at "now + 15 min"
     exit ;;
   add30)
     echo "notify-snooze.sh '$MESSAGE'" | at "now + 30 min"
     exit ;;
   add1hr)
     echo "notify-snooze.sh '$MESSAGE'" | at "now + 1 hour"
     exit ;;
   *)
     exit ;; 
esac
